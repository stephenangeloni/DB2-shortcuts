# DB2-shortcuts  

## Merge Statements

``` 
MERGE INTO RECORDS AR  
 USING (SELECT ACTIVITY, DESCRIPTION FROM ACTIVITIES) AC  
 ON (AR.ACTIVITY = AC.ACTIVITY)  
 WHEN MATCHED THEN  
  UPDATE SET  
  DESCRIPTION = AC.DESCRIPTION  
 WHEN NOT MATCHED THEN  
  INSERT  
  (ACTIVITY, DESCRIPTION)  
  VALUES (AC.ACTIVITY, AC.DESCRIPTION);  
```
  
``` 
MERGE INTO INVENTORY AS IN
 USING (SELECT PARTNO, DESCRIPTION, COUNT FROM SHIPMENT
 WHERE SHIPMENT.PARTNO IS NOT NULL) AS SH
 ON (IN.PARTNO = SH.PARTNO)
 WHEN MATCHED AND SH.COUNT>0 THEN
  UPDATE SET
   DESCRIPTION = SH.DESCRIPTION,
   QUANTITY = IN.QUANTITY + SH.COUNT
 WHEN NOT MATCHED THEN
  INSERT
  (PARTNO, DESCRIPTION, QUANTITY)
  VALUES (SH.PARTNO, SH.DESCRIPTION, SH.COUNT);
```
    
